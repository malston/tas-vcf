---
# TAS 6.0.6 Small Footprint Configuration for VCF 9

product-name: cf
product-properties:
  # Domains
  .cloud_controller.apps_domain:
    value: apps.tas.vcf.lab
  .cloud_controller.system_domain:
    value: sys.tas.vcf.lab

  # Certificates
  .properties.networking_poe_ssl_certs:
    value:
      - name: default
        certificate:
          cert_pem: ((tas_system_cert_pem))
          private_key_pem: ((tas_system_key_pem))

  .properties.credhub_internal_provider_keys:
    value:
      - name: primary
        key:
          secret: ((credhub_encryption_key))
        primary: true

  # Container networking
  .properties.container_networking_interface_plugin:
    value: silk
  .properties.container_networking_interface_plugin.silk.network_cidr:
    value: 10.255.0.0/16
  .properties.container_networking_interface_plugin.silk.network_mtu:
    value: 1454

  # MySQL monitoring
  .mysql_monitor.recipient_email:
    value: admin@tas.vcf.lab

  # Routing (NSX-T configured at BOSH Director level)
  .properties.gorouter_ssl_ciphers:
    value: ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384
  .properties.routing_disable_http:
    value: false
  .properties.routing_custom_ca_certificates:
    value: ((trusted_certificates))

  # Diego cell capacity
  .diego_cell.executor_disk_capacity:
    value: 153600
  .diego_cell.executor_memory_capacity:
    value: 61440

  # UAA
  .uaa.service_provider_key_credentials:
    value:
      cert_pem: ((uaa_service_provider_cert))
      private_key_pem: ((uaa_service_provider_key))

  # Smoke tests
  .properties.smoke_tests:
    value: on_demand

  # Security acknowledgement
  .properties.security_acknowledgement:
    value: X

network-properties:
  network:
    name: ((deployment_segment_name))
  other_availability_zones:
    - name: ((az1_name))
    - name: ((az2_name))
  singleton_availability_zone:
    name: ((az1_name))

resource-config:
  compute:
    instances: automatic
    persistent_disk:
      size_mb: automatic
    instance_type:
      id: automatic
  control:
    instances: automatic
    instance_type:
      id: automatic
  database:
    instances: automatic
    persistent_disk:
      size_mb: automatic
    instance_type:
      id: automatic
  router:
    instances: automatic
    instance_type:
      id: automatic
  tcp_router:
    instances: 0
    instance_type:
      id: automatic

errand-config:
  smoke_tests:
    post-deploy-state: true
  push-usage-service:
    post-deploy-state: false
  push-apps-manager:
    post-deploy-state: true
  deploy-notifications:
    post-deploy-state: false
  deploy-notifications-ui:
    post-deploy-state: false
  deploy-autoscaler:
    post-deploy-state: false
  nfsbrokerpush:
    post-deploy-state: false
  test-autoscaling:
    post-deploy-state: false
  metric_registrar_smoke_test:
    post-deploy-state: false
